<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-09-11">

<title>STAT 201: Intro. to Statistics and Data Science - Study design</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">STAT 201: Intro. to Statistics and Data Science</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://openintro-ims.netlify.app/"><i class="bi bi-book-half" role="img">
</i> 
 <span class="menu-text">Textbook</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://middlebury.instructure.com/"><i class="bi bi-bar-chart-fill" role="img">
</i> 
 <span class="menu-text">Canvas</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Study design</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 11, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="housekeeping" class="level1">
<h1>Housekeeping</h1>
<div class="cell">

</div>
<ul>
<li>Please bring your laptops tomorrow! We will be installing R and RStudio!</li>
</ul>
</section>
<section id="key-terminology" class="level1">
<h1>Key terminology</h1>
<section id="population-and-samples" class="level2">
<h2 class="anchored" data-anchor-id="population-and-samples">Population and samples</h2>
<ul>
<li><p>Data do not come from thin air! Data have to be <em>collected</em> in some way.</p></li>
<li><p>This usually takes the form of sampling a subset of individuals from a target group of interest</p>
<ul>
<li>The target group of interest is called the <strong>population</strong></li>
<li>The subset of individuals from whom we actually collect data is the <strong>sample</strong></li>
</ul></li>
<li><p>A <strong>case</strong> is a fancy term for saying one observational <em>unit</em></p></li>
<li><div class="discuss">
<p>What are the target populations in the following research questions? What would an individual case/unit be?</p>
<ol type="1">
<li><p>What is the average height of trees on Middlebury College campus?</p></li>
<li><p>What proportion of current Middlebury professors attended a liberal arts college?</p></li>
<li><p>Over the last five years, what is the average time to complete a degree for Middlebury College students?</p></li>
</ol>
</div></li>
</ul>
</section>
<section id="population-and-samples-cont." class="level2">
<h2 class="anchored" data-anchor-id="population-and-samples-cont.">Population and samples (cont.)</h2>
<ul>
<li>Typically, the size of the sample is way smaller than the population. Why?
<ul>
<li>In the lucky event that we are able to collect data for every individual in the population, the sample is referred to as a <strong>census</strong></li>
</ul></li>
<li>Example: the U.S. Census Bureau is responsible for producing data about the American people and economy. They collect data with different schemes and frequency:
<ul>
<li><a href="https://www.census.gov/programs-surveys/decennial-census.html">Decennial census</a></li>
<li><a href="https://www.census.gov/history/www/programs/demographic/american_community_survey.html#:~:text=The%20survey%20provides%20current%20data,than%20once%20every%20five%20years.">American community survey</a></li>
</ul></li>
</ul>
</section>
<section id="parameters-and-statistics" class="level2">
<h2 class="anchored" data-anchor-id="parameters-and-statistics">Parameters and statistics</h2>
<ul>
<li><p>Often times, answering the research question simplifies to understanding a numerical summary.</p>
<ul>
<li><p>A numerical summary calculated from (or considered for calculation from) the entire population is called a (population) <strong>parameter</strong></p></li>
<li><p>In contrast, a numerical summary calculated from the sample is called a (sample) <strong>statistic</strong></p></li>
</ul></li>
<li><p>Why do we differentiate? It’s always good to remember that we are trying to answer questions about the population!</p></li>
</ul>
</section>
</section>
<section id="sampling-from-a-population" class="level1">
<h1>Sampling from a population</h1>
<section id="a-good-sample" class="level2">
<h2 class="anchored" data-anchor-id="a-good-sample">A “good” sample</h2>
<ul>
<li><p>The way we sample data from a population can directly influence the quality of that sample.</p></li>
<li><div class="discuss">
<p>What are desirable characteristics of a sample?</p>
</div>
<ul>
<li><strong>Representative</strong>: the sample roughly “looks like” the population, i.e.&nbsp;the individuals in the sample offer a good representation of the population at large</li>
<li><strong>Generalizable</strong>: any results based on the sample can generalize to the population, i.e.&nbsp;we can make “good guesses” about a population parameter using a sample statistic</li>
<li><strong>Unbiased</strong>: every individual in the sample had an equal chance of being sampled</li>
</ul></li>
</ul>
</section>
<section id="bias-in-a-sample" class="level2">
<h2 class="anchored" data-anchor-id="bias-in-a-sample">Bias in a sample</h2>
<ul>
<li>Bias in a sample can arise due to many causes. Here are a few:
<ul>
<li>Convenience sampling bias</li>
<li>Selection bias: systematic tendency in procedure that causes some members of population to be less likely to be included than others</li>
<li>Exclusion/undercoverage bias</li>
<li>Non-response bias</li>
<li>Response bias</li>
</ul></li>
</ul>
</section>
<section id="example-literary-digest-poll" class="level2">
<h2 class="anchored" data-anchor-id="example-literary-digest-poll">Example: <em>Literary Digest</em> poll</h2>
<ul>
<li><p>1936 was an election year in the United States. Franklin D. Roosevelt (a Democrat) was completing his first term in office as president.</p></li>
<li><p>Republican candidate Alfred Landon of Kansas was his competitor</p></li>
<li><p><em>Literary Digest</em> magazine conducted a polling survey, which received 2.4 million respondents (largest number of people every replying to a poll at that time)</p>
<ul>
<li>Prediction: overwhelming victory for Landon (predicted FDR would only get <strong>43%</strong> of popular vote)</li>
</ul></li>
<li><p>Actual result: FDR won by a landslide! (<strong>62%</strong> to 38%)</p></li>
<li><p>What happened? Selection and non-response bias</p></li>
</ul>
<div class="notes">
<ul>
<li><p>Selection bias: Digest mailed questionnaires to 10 million people. Where did they get the address form? Telephone books and club membership lists –&gt; screened out the poor (only about 25% of households had phones)</p>
<ul>
<li>This wouldn’t necessarily be bias, EXCEPT for the fact that poor people overwhelmingly favored FDR and the rich favored Landon</li>
</ul></li>
<li><p>Non-response bias: lots of people didn’t respond to survey (~75%)</p>
<ul>
<li><p>Once again, wouldn’t matter if there wasn’t a difference in the opinions of respondents vs non-respondents. But among the 20% who responded, over half favored Landon</p></li>
<li><p>Non-respondents can be very different from respondents. When there is high non-response rate, look for non-response bias</p></li>
</ul></li>
<li><p>Lesson: not all samples that were done poorly are necessarily biased, but we should always ask how the sample was conducted! Also, when a selection procedure is biased, a large sample does not help; this just replicates the mistake on a larger scale!</p></li>
</ul>
</div>
</section>
<section id="probability-sampling" class="level2">
<h2 class="anchored" data-anchor-id="probability-sampling">Probability sampling</h2>
<ul>
<li><p>Any sampling method where the selection from the target population is based on random selection/chance</p>
<ul>
<li><p>All subjects in the target population have equal chances of being selected</p></li>
<li><p>Randomly sampling from the population can help reduce bias in our sample</p></li>
<li><p>No one has discretion about who is included in the sample</p></li>
</ul></li>
<li><p>Examples include: simple random, stratified, cluster, systematic</p></li>
</ul>
</section>
<section id="simple-random-sampling-srs" class="level2">
<h2 class="anchored" data-anchor-id="simple-random-sampling-srs">Simple random sampling (SRS)</h2>
<ul>
<li><p>In a <strong>simple random sample</strong>, each individual is chosen entirely by chance from the population, and each member of the population has an equal chance of being sampled.</p>
<ul>
<li>Typically sampling <em>without</em> replacement</li>
<li>Knowing that an individual was sampled does not provide useful information about which other cases are included</li>
<li>Any given fixed-size subset of the population is equally likely to be chosen.</li>
</ul></li>
<li><div class="discuss">
<p>Consider again the research question: What proportion of current Middlebury professors attended a liberal arts college?</p>
<p>How might I obtain a sample random sample of 25 professors?</p>
</div></li>
</ul>
<div class="notes">
<p>Requires us to list all of the units in the target/survey population –&gt; May be unrealistic!</p>
</div>
</section>
<section id="stratified-sampling" class="level2">
<h2 class="anchored" data-anchor-id="stratified-sampling">Stratified sampling</h2>
<ul>
<li><p>Depending on the population, we might need to use different random sampling methods to ensure the sample is representative.</p></li>
<li><p>Assume that the population is/can be broken up into several different, distinct sub-populations or <strong>strata</strong></p>
<ul>
<li>The division should “make sense”</li>
</ul></li>
<li><p>Rather than randomly sampling from the population as whole, we take a random sample from <em>each stratum</em></p>
<ul>
<li><p>How many from each stratum? Typically use a sampling fraction that is proportional to entire population!</p></li>
<li><p>E.g. if population of trees on Middlebury campus are 80% deciduous and 20% coniferous and we want to sample <span class="math inline">\(n = 10\)</span> trees total, we should <em>randomly</em> sample ___ deciduous and ___ coniferous trees</p></li>
</ul></li>
<li><p>What are some pros/cons?</p></li>
</ul>
<div class="notes">
<ul>
<li><p>May be useful to ensure we have samples from rare groups, and helps to improve precision of the sample</p></li>
<li><p>Most useful when stratifying variables are simple to work with, easy to observe, closely related to topic of survey</p></li>
<li><p>Can be expensive to travel –&gt; motivates the next type</p></li>
</ul>
</div>
</section>
<section id="cluster-sampling" class="level2">
<h2 class="anchored" data-anchor-id="cluster-sampling">Cluster sampling</h2>
<ul>
<li><p>Divide total population into <span class="math inline">\(M\)</span> distinct groups or <strong>clusters</strong> of roughly equal size</p></li>
<li><p>Perform a simple random sample on the <span class="math inline">\(M\)</span> clusters, than sample all individuals within each of the randomly selected clusters</p></li>
<li><div class="discuss">
<p>Discuss the following:</p>
<ul>
<li><p>Would you prefer the individuals within a cluster to be homogeneous (similar) or heterogeneous (varied)? Why?</p></li>
<li><p>Would you prefer that cluster A and cluster B be relatively similar or different in terms of their sub-populations?</p></li>
<li><p>What is the difference between stratified and cluster sampling?</p></li>
</ul>
</div></li>
</ul>
<div class="notes">
<ul>
<li><p>Creates pockets of sampled units –&gt; reducing costs. Also useful when we cannot obtain a list of ALL units in the population, but can easily obtain a list of all units within a cluster</p></li>
<li><p>Less efficient that SRS –&gt; better to survey large number of small clusters than vice versa</p>
<ul>
<li>Neighboring units tend to be more similar –&gt; sampling one being cluster would not represent a whole spectrum of variation present in the entire population</li>
</ul></li>
<li><p>Difficult to control final sample size. If you want a particular size n (e.g.&nbsp;100), the other two methods are easier</p></li>
</ul>
</div>
</section>
<section id="multistage-cluster-sampling" class="level2">
<h2 class="anchored" data-anchor-id="multistage-cluster-sampling">Multistage cluster sampling</h2>
<ul>
<li><p>Builds on the cluster sampling method, but rather than sampling all individuals within the selected clusters, only collect a simple random sample within each selected cluster</p>
<ul>
<li>Can make more stages/layers if appropriate!</li>
</ul></li>
<li><p>Though seemingly more complicated, why might we prefer multistage sampling over cluster sampling?</p></li>
<li><p>How might we devise a multistage cluster sample for Literary Digest?</p></li>
</ul>
</section>
</section>
<section id="experiments-vs.-observational-studies" class="level1">
<h1>Experiments vs.&nbsp;Observational studies</h1>
<p>We now know <em>how</em> to collect data, but now we turn to examining <em>what</em> <em>kind</em> of study we’d like to perform in order to answer the research question. We begin with experiments. But first…</p>
<div class="discuss">
<p>What is a variable?</p>
</div>
<div class="notes">
<p>Variables in math represent a quantity that can change; not fixed. For us, it’s the same idea! A variable is a characteristic/number/quantity that can be measured or counted and can take different values</p>
</div>
<section id="explanatory-vs.-response" class="level2">
<h2 class="anchored" data-anchor-id="explanatory-vs.-response">Explanatory vs.&nbsp;Response</h2>
<ul>
<li><p>Lots of scientific questions revolve around asking how <span class="math inline">\(x\)</span> relates to <span class="math inline">\(y\)</span></p></li>
<li><p>If <span class="math inline">\(y\)</span> is the primary variable of interest, i.e.&nbsp;the variable whose behavior we want to understand, it is called the <strong>response variable</strong></p></li>
<li><p>If we try to understand how changing <span class="math inline">\(x\)</span> affects <span class="math inline">\(y\)</span>, then <span class="math inline">\(x\)</span> is called the <strong>explanatory variable</strong></p>
<ul>
<li>Explanatory variables can often be manipulated/controlled/observed by the researcher ahead of time</li>
</ul></li>
</ul>
</section>
<section id="experimental-design" class="level2">
<h2 class="anchored" data-anchor-id="experimental-design">Experimental design</h2>
<ul>
<li><p><strong>Experiments</strong> are studies where the researcher assigns treatments to cases</p>
<ul>
<li><p>Note: experiments are often conducted in medical settings, hence the word “treatment”</p></li>
<li><div class="discuss">
<p>Are treatments considered explanatory or response variables?</p>
</div></li>
</ul></li>
<li><p>When the researcher <em>randomly</em> assigns the treatments, we have a <strong>randomized experiment</strong></p>
<ul>
<li><p>Randomized experiments are critical when trying to assess the causal effect of the explanatory variable on the response variable</p></li>
<li><p>Note: random assignment <span class="math inline">\(\ne\)</span> random sampling</p></li>
</ul></li>
</ul>
</section>
<section id="confounding-variables" class="level2">
<h2 class="anchored" data-anchor-id="confounding-variables">Confounding variables</h2>
<ul>
<li><p>Understanding a <em>causal</em> relationship is made difficult by <strong>confounding</strong> <strong>variables</strong>: variables that are associated with both the explanatory and response variable of interest</p>
<ul>
<li><div style="color: maroon">
<p>Confounders are bad!! Why?</p>
</div></li>
</ul></li>
<li><p>Example: consider a study that seeks to examine the effect of coffee consumption on heart disease.</p>
<ul>
<li><p>From each person, we only collect information on the average amount of coffee they consume per day and whether or not they have heart disease.</p></li>
<li><p>We find a positive association: more coffee <span class="math inline">\(\rightarrow\)</span> higher risk of heart disease</p></li>
<li><p>Possible confounder: smoker status. Smokers <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4879503/#:~:text=Cigarette%20smoking%20is%20associated%20with,of%20coffee%20per%20day%202.">tend to drink more coffee</a> and tend to have <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7399440/">higher rates of heart disease</a> than non-smokers.</p></li>
<li><p>So the increase in heart disease may be due to smoker status rather than caffeine intake</p></li>
</ul></li>
</ul>
<div class="notes">
<p>Confounders prevent us from attributing the cause to the (desired) explanatory variable!</p>
</div>
</section>
<section id="principles-of-experimental-design" class="level2">
<h2 class="anchored" data-anchor-id="principles-of-experimental-design">Principles of experimental design</h2>
<p>Running example: quizzes and final exam</p>
<ol type="1">
<li><p><strong>Randomization</strong>: randomly assign patients to treatments</p>
<ul>
<li>Helps account for variables that cannot be controlled and possible confounding variables</li>
</ul></li>
<li><p><strong>Controlling</strong> for differences in the treatment: ensure that everyone follows the same protocol exactly</p></li>
<li><p><strong>Replication</strong>: the more cases we observe, the more confidence we have in the effect of the explanatory on the response</p>
<ul>
<li>Achieved by collecting a sufficiently large sample in a single study, or repeating the entire study more than once</li>
</ul></li>
</ol>
<div class="fragment">
<p>These first three principles are crucial! The following is principle is desirable, but more complicated.</p>
</div>
</section>
<section id="principles-of-experimental-design-cont." class="level2">
<h2 class="anchored" data-anchor-id="principles-of-experimental-design-cont.">Principles of experimental design (cont.)</h2>
<ol start="4" type="1">
<li><strong>Blocking</strong>: suppose we know ahead of time that there is/are variable(s) that could influence the response besides just the explanatory. We assign patients to their respective blocks, and than randomly assign treatments within blocks.
<ul>
<li>Helps to decrease unexplained variability by accounting for <strong>nuisance variables</strong>: variables that affect the response variable but are not of interest for answering the scientific question</li>
<li>Can lead to greater interpretation of results</li>
</ul></li>
</ol>
</section>
<section id="treatment-vs.-control" class="level2">
<h2 class="anchored" data-anchor-id="treatment-vs.-control"><strong>Treatment vs.&nbsp;control</strong></h2>
<ul>
<li><p>Randomized experiments are the gold standard for data collection, but biases can still occur!</p></li>
<li><p>When we want to learn if the explanatory variable causes some effect in the response variable.</p>
<ul>
<li><p>We have a <strong>control group</strong> which establishes a baseline, and typically receives “zero amount” of the explanatory variable.</p></li>
<li><p>We also have a <strong>treatment group</strong> which receives some “non-zero amount” of the explanatory variable</p></li>
</ul></li>
<li><p>Example: suppose we want to test the effect of a drug that is developed to help people fall asleep.</p>
<ul>
<li><p>Treatment group: receives 50mg of the drug in pill form</p></li>
<li><p>Control group: does not receive the drug at all</p></li>
<li><div class="discuss">
<p>What is a potential issue?</p>
</div></li>
</ul></li>
</ul>
</section>
<section id="reducing-bias-in-human-experiments" class="level2">
<h2 class="anchored" data-anchor-id="reducing-bias-in-human-experiments">Reducing bias in human experiments</h2>
<ul>
<li><p>We should make the experiment a <strong>blind experiment</strong> by not allowing participants to know which group they’ve been assigned to</p>
<ul>
<li><p>Give a fake treatment known as a <strong>placebo</strong> to those in the control group (e.g.&nbsp;a sugar pill that looks exactly like the actual treatment pill)</p></li>
<li><p>Oftentimes, a placebo results in a slight but real improvement in patients. This is known as the <strong>placebo effect</strong></p></li>
</ul></li>
<li><p>Doctors and researchers involved in the study should also be blinded so they do not give preferential treatment or care to patients in certain groups.</p>
<ul>
<li><strong>Double-blind</strong> experiments: both the patients and the doctors/researchers who interact with patients are unaware of who is or is not receiving the treatment</li>
</ul></li>
<li><p>Question of ethics</p></li>
</ul>
</section>
<section id="observational-studies" class="level2">
<h2 class="anchored" data-anchor-id="observational-studies">Observational studies</h2>
<ul>
<li><p>Studies where no treatment is explicitly applied</p></li>
<li><p>Nothing is manipulated; researchers simply record/observe without intervening</p>
<ul>
<li><div class="discuss">
<p>How would we turn the quiz/exam score example into an observational study?</p>
</div></li>
</ul></li>
<li><p>Typically cannot obtain causal conclusions using data from observational studies</p>
<ul>
<li>There are too many confounding variables at play in observational studies</li>
</ul></li>
<li><p>But we can use these studies to identify associations or form hypotheses for future experiments!</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>